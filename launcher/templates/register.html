<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>도서관 대출 서비스</title>

    <link rel="stylesheet" href="../static/css/register.css">
</head>
<body>
    <form action = "" method="post">
        {{ form.csrf_token }}
        <h1>회원가입</h1>
        
        <div><input type="text" placeholder="Name" id="fullname" name="fullname" value="{{ form.fullname.data or '' }}"></div>
        {% if form.fullname.errors %}
        <div class="error">&#10060;{{ form.fullname.errors.0 }}</div>
        {% endif %}

        <div>
            <input type="text" placeholder="Email" id="email" name="email" value="{{ form.email.data or '' }}">
        </div>
        <!-- 필드 에러(폼 검증에 실패한 경우) -->
        {% if form.email.errors %}
        <div class="error">
            &#10060;
            {{ form.email.errors.0 }}
        </div>
        {% endif %}
        <!-- flash 에러 -->
        {% with errors = get_flashed_messages(category_filter=["email_error"]) %}
        {% if errors %}
        <div class="error">
            &#10060;
            {{ errors[-1] }}
        </div>
        {% endif %}
        {% endwith %}

        <div><input type="password" placeholder="Password" id="password" name="password" value="{{ form.password.data or '' }}"></div>
        {% if form.password.errors %}
        <div class="error">&#10060;{{ form.password.errors.0 }}</div>
        {% endif %}

        <div>
            <input type="password" placeholder="Repeat Password" id="repeat_password" name="repeat_password" value="{{ form.repeat_password.data or '' }}">
        </div>
        <!-- 필드 에러(폼 검증에 실패한 경우) -->
        {% if form.repeat_password.errors %}
        <div class="error">
            &#10060;
            {{ form.repeat_password.errors.0 }}
        </div>
        {% endif %}
        <!-- flash 에러 -->
        {% with errors = get_flashed_messages(category_filter=["pw_error"]) %}
        {% if errors %}
        <div class="error">
            &#10060;
            {{ errors[-1] }}
        </div>
        {% endif %}
        {% endwith %}

        <br><input type = "submit" id="sign-up" value = "Sign Up" />

    </form>
</body>
</html>